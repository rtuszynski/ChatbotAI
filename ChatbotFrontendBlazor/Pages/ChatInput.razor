@using ChatbotFrontendBlazor.Models
@using ChatbotFrontendBlazor.Services
@inject ChatService ChatService

<div class="container mt-4">
    <h3 class="text-primary">Send a Message</h3>
    <div class="input-group">
        <input class="form-control" @bind="userMessage" placeholder="Your message" />
        <button class="btn btn-primary" @onclick="SendMessage">Send</button>
    </div>
</div>

@code {
    private string userMessage;

    [Parameter] public EventCallback OnMessageSent { get; set; }

    private async Task SendMessage()
    {
        var message = new ChatMessage
            {
                UserMessage = userMessage,
                Rating = null
            };

        await ChatService.AddMessageAsync(message);
        await OnMessageSent.InvokeAsync();

        userMessage = string.Empty;
    }
}
